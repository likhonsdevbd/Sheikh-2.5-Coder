# Data Preparation Configuration
# Sheikh-2.5-Coder Data Processing Settings

# Dataset Sources
datasets:
  stack_v2:
    source: "bigcode/the-stack-smol-ids"
    languages: ["javascript", "typescript", "xml", "html", "css"]
    max_examples_per_lang: 1000000
    quality_threshold: 0.75
  
  opencode_instruct:
    source: "bigcode/instructcodet5p-px"
    target_size: 50000000
    quality_filter: true
    unit_test_validation: true
  
  code_search_net:
    source: "code_search_net"
    languages: ["javascript", "typescript"]
    similarity_threshold: 0.6

# Preprocessing Settings
preprocessing:
  tokenizer: "microsoft/codebert-base"
  max_sequence_length: 1024
  language_tokens:
    javascript: ["<js>", "</js>", "<function>", "</function>"]
    typescript: ["<ts>", "</ts>", "<interface>", "</interface>"]
    xml: ["<xml>", "</xml>", "<element>", "</element>"]
    html: ["<html>", "</html>", "<tag>", "</tag>"]
    css: ["<css>", "</css>", "<rule>", "</rule>"]

# Deduplication Settings
deduplication:
  method: "minhash_lsh"
  threshold: 0.8
  num_perm: 128
  enable_semantic_deduplication: true

# Quality Filtering
quality_filters:
  length_ratio:
    min: 0.1
    max: 0.9
  complexity_score:
    minimum: 0.3
  semantic_coherence:
    minimum: 0.6
  language_detection:
    confidence_threshold: 0.85

# Synthetic Data Generation
synthetic_generation:
  target_count: 250000
  domains:
    xml_generation: 100000
    mdx_creation: 80000
    js_enhancement: 70000
  generation_methods:
    - "self_instruct"
    - "evol_instruct"
    - "domain_specific"

# Performance Targets
targets:
  total_training_tokens: 500000000000  # 500B tokens
  language_distribution:
    javascript_typescript: 0.35
    xml_html: 0.25
    mdx_markdown: 0.15
    css_scss: 0.10
    other: 0.15
  quality_targets:
    data_quality: 0.85
    duplication_rate: 0.05
    language_accuracy: 0.95
    syntax_validity: 0.90

# Output Settings
output:
  base_directory: "data"
  raw_data: "data/raw"
  processed_data: "data/processed"
  tokenized_data: "data/tokenized"
  logs: "logs"
  reports: "evaluation/reports"
